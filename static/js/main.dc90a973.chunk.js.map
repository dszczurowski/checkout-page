{"version":3,"sources":["images/product.png","components/Modal/Modal.tsx","components/OrderItem/OrderItem.tsx","components/OrdersList/OrdersList.tsx","components/QuantitySelector/QuantitySelector.tsx","utils/price.tsx","components/ProductDetails/ProductDetails.tsx","components/ShippingDetails/ShippingDetails.tsx","components/CheckoutPage/CheckoutPage.tsx","index.tsx"],"names":["module","exports","Modal","confirmText","onClose","showModal","text","className","onClick","OrderItem","data","firstName","lastName","country","Date","createdAt","toLocaleString","units","isPremium","OrdersList","orders","map","order","key","id","QuantitySelector","max","quantity","onChange","type","min","step","value","formatPrice","price","priceToFormat","Math","floor","getRoundedPrice","Number","toFixed","getTotalAmountWithoutDiscount","freeShipping","totalAmount","ProductDetails","onProductDataChange","useState","setFreeShipping","setTotalAmount","setQuantity","useEffect","amount","discountDecimal","getTotalAmount","totalAmountWithoutDiscount","shippingInformation","alt","src","productImg","evt","target","initialState","email","phone","street","city","ShippingDetails","onPurchaseClick","formState","setFormState","fetchedCountry","setFetchedCountry","a","fetch","response","json","handleChange","name","onSubmit","preventDefault","checkValidity","required","form","CheckoutPage","setOrders","purchaseData","setPurchaseData","setShowModal","sortOrders","sort","b","getTime","shippingState","newPurchaseData","String","now","newSortedOrders","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc90a973.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/product.5d2b8b6a.png\";","import React from 'react';\nimport './Modal.scss';\n\ninterface IProps {\n  confirmText: string;\n  showModal: boolean;\n  text: string;\n  onClose: () => void;\n}\n\nconst Modal: React.FC<IProps> = ({ confirmText, onClose, showModal, text }) => {\n  if (!showModal) {\n    return null;\n  }\n  return (\n    <div className=\"modal\">\n      {text}\n      <button className=\"confirm-btn\" onClick={onClose}>{confirmText}</button>\n    </div>\n  );\n}\n\nexport default Modal;\n","import React from 'react';\nimport { OrderItemType } from '../../types/order';\nimport './OrderItem.scss';\n\ninterface IProps {\n  data: OrderItemType\n}\n\nconst OrderItem: React.FC<IProps> = ({ data }) => {\n  return (\n    <li>\n      {data.firstName} {data.lastName} ({data.country})\n      <p>Ordered time: {new Date(data.createdAt).toLocaleString()}</p>\n      <p>Units: {data.units}</p>\n      <p>Premium service: {data.isPremium ? 'yes' : 'no'}</p>\n    </li>\n  );\n}\n\nexport default OrderItem;\n","import React from 'react';\nimport { OrderItemType } from '../../types/order';\nimport OrderItem from '../../components/OrderItem/OrderItem';\nimport './OrdersList.scss';\n\ninterface IProps {\n  orders: Array<OrderItemType>;\n}\n\nconst OrdersList: React.FC<IProps> = ({ orders}) => {\n  return (\n    <section>\n      <p className=\"orders-title\">RECENT ORDERS</p>\n      <ul className=\"orders-list\">\n        {orders.map((order: OrderItemType) => <OrderItem key={order.id} data={order}/>)}\n      </ul>\n    </section>\n  );\n}\n\nexport default OrdersList;\n","import React from 'react';\nimport './QuantitySelector.scss';\n\ninterface IProps {\n  max: number;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  quantity: number;\n}\n\nconst QuantitySelector: React.FC<IProps> = ({ max, quantity, onChange }) => {\n  return (\n    <div className=\"quantity-selector-container\">\n      <p>\n        {quantity} product(s)\n      </p>\n      <input\n        className=\"quantity-selector\"\n        onChange={onChange}\n        type=\"range\"\n        min={1}\n        max={max}\n        step={1}\n        value={quantity}\n      />\n    </div>\n  );\n}\n\nexport default QuantitySelector;\n","const DISCOUNT_DECIMAL = 0.05;\r\nconst SHIPPING_PRICE = 15;\r\n\r\nexport const PRODUCT_PRICE = 27.49;\r\n\r\nconst getRoundedPrice = (price: number): number => Math.floor(price) + 0.99;\r\nconst formatPrice = (price: number, quantity: number): number => {\r\n    const priceToFormat = quantity > 1 ? getRoundedPrice(price) : price;\r\n    return Number(priceToFormat.toFixed(2));\r\n}\r\n\r\nexport const getInitialTotalAmount = () => Number((PRODUCT_PRICE + SHIPPING_PRICE).toFixed(2));\r\n\r\nexport const getTotalAmountWithoutDiscount = (quantity: number, freeShipping: boolean): number => {\r\n    const totalAmount = PRODUCT_PRICE * quantity;\r\n    const totalAmountWithShipping = freeShipping ? totalAmount : totalAmount + SHIPPING_PRICE;\r\n    return formatPrice(totalAmountWithShipping, quantity);\r\n}\r\n\r\nexport const getTotalAmount = (quantity: number, freeShipping: boolean): number => {\r\n    const discountDecimal = (quantity - 1) * DISCOUNT_DECIMAL;\r\n    const totalAmount = getTotalAmountWithoutDiscount(quantity, true) * (1 - discountDecimal);\r\n    const totalAmountWithShipping = freeShipping ? totalAmount : totalAmount + SHIPPING_PRICE;\r\n    return formatPrice(totalAmountWithShipping, quantity);\r\n};\r\n","import React, { useEffect, useState } from 'react';\nimport productImg from '../../images/product.png';\nimport QuantitySelector from '../../components/QuantitySelector/QuantitySelector'\nimport { getInitialTotalAmount, getTotalAmount, getTotalAmountWithoutDiscount, PRODUCT_PRICE } from '../../utils/price'\nimport './ProductDetails.scss';\n\ninterface IProps {\n  onProductDataChange: (amount: number, quantity: number) => void;\n}\n\nconst ProductDetails: React.FC<IProps> = ({ onProductDataChange }) => {\n  const [freeShipping, setFreeShipping] = useState(false);\n  const [totalAmount, setTotalAmount] = useState(getInitialTotalAmount());\n  const [quantity, setQuantity] = useState(1);\n\n  useEffect(() => {\n    const amount = getTotalAmount(quantity, freeShipping);\n    setTotalAmount(amount);\n    onProductDataChange(amount, quantity);\n    // eslint-disable-next-line\n  }, [quantity, freeShipping])\n\n  const handleQuantityChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const quantity = Number(evt.target.value);\n    setQuantity(quantity);\n    setFreeShipping(quantity > 11);\n  }\n\n  const totalAmountWithoutDiscount = quantity > 1 && <s>${getTotalAmountWithoutDiscount(quantity, freeShipping)}</s>;\n  const shippingInformation = `Shipping: $${freeShipping ? '0' : '15'}`\n\n  return (\n    <section className=\"product-details\">\n      <p className=\"product-brand\">\n        POIĒMA\n      </p>\n      <p className=\"product-name\">\n        Multi-functional serum\n      </p>\n      <img alt=\"product\" className=\"product-img\" src={productImg} />\n      <span className=\"product-price\">${PRODUCT_PRICE}</span>\n      <p className=\"product-discount\">\n        Get 5% discount for each additional product<br/>\n        For 12 products shipping is free!\n      </p>\n      <QuantitySelector onChange={handleQuantityChange} quantity={quantity} max={12}/>\n      <p className=\"product-shipping\">\n        {shippingInformation}\n      </p>\n      <span>\n        <b>Total amount: ${totalAmount}</b> {totalAmountWithoutDiscount}\n      </span>\n    </section>\n  );\n}\n\nexport default ProductDetails;\n","import React, { useEffect, useState } from 'react';\nimport './ShippingDetails.scss';\n\ninterface IProps {\n  onPurchaseClick: (state: {[key: string]: string}) => void;\n}\n\nconst initialState = {\n  firstName: '',\n  lastName: '',\n  email: '',\n  phone: '',\n  street: '',\n  city: '',\n  country: ''\n};\n\nconst ShippingDetails: React.FC<IProps> = ({ onPurchaseClick }) => {\n  const [formState, setFormState] = useState(initialState);\n  const [fetchedCountry, setFetchedCountry] = useState('');\n\n  useEffect(() => {\n    (async () => {\n      let response  = await fetch('http://ip-api.com/json');\n      let data = await response.json();\n      setFormState({ ...formState, country: data.country })\n      setFetchedCountry(data.country);\n    })();\n    // eslint-disable-next-line\n  }, [])\n\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst { value, name } = evt.target;\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\t[name]: value\n\t\t});\n  };\n  \n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    if (evt.target.checkValidity()) {\n      onPurchaseClick(formState);\n      setFormState({ ...initialState, country: fetchedCountry });\n    }\n\t};\n\n  return (\n    <section className=\"shipping-container\">\n      <form id=\"shipping-form\" className=\"shipping-details\" onSubmit={handleSubmit}>\n        <p className=\"checkout-title\">CHECKOUT</p>\n        <label>First name:\n          <input type=\"text\" name=\"firstName\" value={formState.firstName} onChange={handleChange} required/>\n        </label>\n        <label>Last name:\n          <input type=\"text\" name=\"lastName\" value={formState.lastName} onChange={handleChange} required/>\n        </label>\n        <label>E-mail:\n          <input type=\"email\" name=\"email\" value={formState.email} onChange={handleChange} required/>\n        </label>\n        <label>Phone:\n          <input type=\"tel\" name=\"phone\" value={formState.phone} onChange={handleChange} required/>\n        </label>\n        <label>Street:\n          <input type=\"text\" name=\"street\" value={formState.street} onChange={handleChange} required/>\n        </label>\n        <label>City:\n          <input type=\"text\" name=\"city\" value={formState.city} onChange={handleChange} required/>\n        </label>\n        <label>Country:\n          <input type=\"text\" name=\"country\" value={formState.country} onChange={handleChange} required/>\n        </label>\n      </form>\n      <button form=\"shipping-form\" className=\"purchase-btn\">PURCHASE</button>\n    </section>\n    \n  );\n}\n\nexport default ShippingDetails;\n","import React, { useEffect, useState } from 'react';\nimport Modal from '../../components/Modal/Modal';\nimport OrdersList from '../../components/OrdersList/OrdersList';\nimport ProductDetails from '../../components/ProductDetails/ProductDetails';\nimport ShippingDetails from '../../components/ShippingDetails/ShippingDetails';\nimport { OrderItemType } from '../../types/order';\nimport './CheckoutPage.scss';\n\nconst CheckoutPage: React.FC = () => {\n  const [orders, setOrders] = useState([]);\n  const [purchaseData, setPurchaseData] = useState({});\n  const [showModal, setShowModal] = useState(false);\n\n  const sortOrders = (orders: Array<OrderItemType>) => orders.sort((a: OrderItemType, b: OrderItemType) => {\n    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n  });\n\n  useEffect(() => {\n    (async () => {\n      let response  = await fetch('https://api.jsonbin.io/b/5ecd438ca2a6e10f7bc644c3');\n      let data = await response.json();\n      setOrders(sortOrders(data));\n    })();\n    // eslint-disable-next-line\n  }, [])\n\n  const handlePurchaseClick = (shippingState: {[key: string]: string}) => {\n    const newPurchaseData = { ...purchaseData, ...shippingState, id: String(Date.now()), createdAt: String(new Date()) };\n    const newSortedOrders = sortOrders([newPurchaseData].concat(orders))\n    setPurchaseData(newPurchaseData);\n    setOrders(newSortedOrders);\n    setShowModal(true);\n  };\n\n  const handleProductDataChange = (totalAmount: number, quantity: number) => {\n    setPurchaseData({ ...purchaseData, totalAmount, units: quantity, isPremium: quantity > 11 });\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n  };\n\n  return (\n    <main className=\"checkout-page\">\n      <section className=\"checkout-info\">\n        <ProductDetails onProductDataChange={handleProductDataChange}/>\n        <ShippingDetails onPurchaseClick={handlePurchaseClick}/>\n      </section>\n      <OrdersList orders={orders}/>\n      <Modal\n        confirmText=\"OK\"\n        onClose={handleCloseModal}\n        showModal={showModal}\n        text=\"Purchase completed. See recent orders below.\"\n      />\n    </main>\n  );\n}\n\nexport default CheckoutPage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CheckoutPage from './components/CheckoutPage/CheckoutPage';\n\nReactDOM.render(\n  <React.StrictMode>\n    <CheckoutPage />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}